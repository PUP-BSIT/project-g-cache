<div class="admin-login-container">
  <div class="login-header">
    <div class="header-brand">
      <img src="assets/images/logo-with-name.png" alt="Pomodify" class="brand-logo-icon" />
    </div>
  </div>

  <div class="login-content">
    <div class="login-panel">
      <div class="login-card">
        <button type="button" class="back-btn" (click)="onBack()" aria-label="Go back">
          <i class="fa-solid fa-arrow-left"></i>
        </button>
        <h1 class="page-title">Admin Portal</h1>
        <p class="subtitle">User Management System</p>

        @if (loginError) {
          <div class="form-error">{{ loginError }}</div>
        }

        <form class="login-form" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <input
              type="text"
              id="username"
              formControlName="username"
              placeholder="Username"
              [class.invalid]="loginForm.get('username')?.invalid && (loginForm.get('username')?.touched || loginForm.get('username')?.dirty)"
            />
            @if (loginForm.get('username')?.hasError('required') && (loginForm.get('username')?.touched || loginForm.get('username')?.dirty)) {
              <div class="field-error">Username is required.</div>
            }
          </div>

          <div class="form-group password-group">
            <input
              [type]="passwordInputType"
              id="password"
              formControlName="password"
              placeholder="Password"
              [class.invalid]="loginForm.get('password')?.invalid && (loginForm.get('password')?.touched || loginForm.get('password')?.dirty)"
            />
            <button
              type="button"
              class="password-toggle"
              (click)="togglePasswordVisibility()"
              [attr.aria-label]="passwordVisible ? 'Hide password' : 'Show password'">
              <i class="fa-solid" [ngClass]="passwordVisible ? 'fa-eye-slash' : 'fa-eye'"></i>
            </button>
            @if (loginForm.get('password')?.hasError('required') && (loginForm.get('password')?.touched || loginForm.get('password')?.dirty)) {
              <div class="field-error">Password is required.</div>
            }
            @if (loginForm.get('password')?.hasError('minlength') && !loginForm.get('password')?.hasError('required') && (loginForm.get('password')?.touched || loginForm.get('password')?.dirty)) {
              <div class="field-error">Password must be at least 6 characters.</div>
            }
          </div>

          <button type="submit" class="btn-login" [disabled]="isLoading || loginForm.invalid">
            @if (isLoading) {
              <span class="spinner"></span>
              Signing in...
            } @else {
              <i class="fa-solid fa-shield-halved"></i>
              Sign In as Admin
            }
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
